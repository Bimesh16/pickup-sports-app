const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-CT_T9aIH.js","assets/index-5gA1ZPbL.js","assets/index-Dkp5M5po.css","assets/user-BxzEEfUu.js"])))=>i.map(i=>d[i]);
import{w as S,u as k,r as l,_ as x,j as e,x as g,C as p,i as j}from"./index-5gA1ZPbL.js";const s={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function v(){const{id:d}=S(),h=k(),[t,m]=l.useState(null),[b,y]=l.useState(!0),[w,f]=l.useState(!1),o=String((s==null?void 0:s.VITE_USE_MOCK)??"true").toLowerCase()!=="false";l.useEffect(()=>{let n=!0;return(async()=>{var r;y(!0);try{if(o){const{default:c}=await x(async()=>{const{default:a}=await import("./Dashboard-CT_T9aIH.js");return{default:a}},__vite__mapDeps([0,1,2,3]))}if(o){const a=await x(()=>import("./Dashboard-CT_T9aIH.js"),__vite__mapDeps([0,1,2,3])),i=(a==null?void 0:a.mockApi)||{getGame:async P=>({id:P,sport:"Futsal",location:"Nepal",gameTime:new Date().toISOString(),currentPlayers:0,maxPlayers:10,createdBy:{username:"organizer"}})},u=await((r=i.getGame)==null?void 0:r.call(i,Number(d)));n&&m(u)}else{const c=(s==null?void 0:s.VITE_API_BASE)||"http://localhost:8080",a=localStorage.getItem("ps_token"),i=await fetch(`${c}/api/v1/games/${d}`,{headers:{Authorization:a?`Bearer ${a}`:""}});if(i.ok){const u=await i.json();n&&m(u)}}}finally{y(!1)}})(),()=>{n=!1}},[d,o]);const E=async()=>{if(t){f(!0);try{const n=(s==null?void 0:s.VITE_API_BASE)||"http://localhost:8080",r=localStorage.getItem("ps_token");o||await fetch(`${n}/api/v1/games/${t.id}/join`,{method:"POST",headers:{Authorization:r?`Bearer ${r}`:""}}),h("/dashboard")}finally{f(!1)}}};return b?e.jsx("div",{style:{minHeight:"100vh",background:g.gradients.sunset,display:"grid",placeItems:"center",padding:16},children:e.jsxs(p,{padding:"lg",style:{width:640},children:[e.jsx("div",{style:{height:20,background:"#e5e7eb",borderRadius:8,marginBottom:12}}),e.jsx("div",{style:{height:14,background:"#e5e7eb",borderRadius:8,width:"60%",marginBottom:20}}),e.jsx("div",{style:{height:120,background:"#f3f4f6",borderRadius:12}})]})}):t?e.jsx("div",{style:{minHeight:"100vh",background:g.gradients.sunset,display:"grid",placeItems:"center",padding:16},children:e.jsxs(p,{padding:"lg",style:{width:720},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[e.jsxs("div",{children:[e.jsxs("h1",{style:{margin:0},children:[t.sport," Game"]}),e.jsx("div",{style:{color:"#64748b"},children:t.location})]}),e.jsx(j,{variant:"outline",onClick:()=>h(-1),children:"Back"})]}),e.jsxs("div",{style:{marginBottom:12,color:"#64748b"},children:["Time: ",new Date(t.gameTime||t.time).toLocaleString()]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:["ðŸ‘¥ ",t.currentPlayers,"/",t.maxPlayers," players"]}),e.jsx(j,{onClick:E,isLoading:w,disabled:t.currentPlayers>=t.maxPlayers,children:t.currentPlayers>=t.maxPlayers?"Full":"Join Game"})]})]})}):e.jsx("div",{style:{minHeight:"100vh",background:g.gradients.sunset,display:"grid",placeItems:"center",color:"white"},children:"Could not load game."})}export{v as default};
