import{q as l,j as e,x as s,C as i,i as o,k as D}from"./index-5gA1ZPbL.js";/* empty css                   */const x={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function P(){const[c,u]=l.useState({displayName:"",language:"en"}),[r,f]=l.useState({showLocation:!0,showPhone:!1}),[d,j]=l.useState({loginAlerts:!0,twoFA:!1}),[p,v]=l.useState({defaultMethod:"cash"}),[a,S]=l.useState({google:!1,apple:!1}),[y,w]=l.useState([]),[b,h]=l.useState(null),[C,g]=l.useState(!1),A=async()=>{try{const t=localStorage.getItem("ps_token"),n=(x==null?void 0:x.VITE_API_BASE)||"http://localhost:8080",k=await fetch(`${n}/users/me/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""},body:JSON.stringify({account:c,privacy:r,security:d,payments:p,integrations:a})});if(!k.ok)throw new Error(String(k.status));h("Settings saved"),setTimeout(()=>h(null),2e3)}catch{localStorage.setItem("ps_settings_adv",JSON.stringify({account:c,privacy:r,security:d,payments:p,integrations:a})),h("Saved locally"),setTimeout(()=>h(null),2e3)}},m=t=>{S(n=>({...n,[t]:!0})),w(n=>[{when:new Date().toISOString(),what:`Connected ${t} sign-in`},...n])};return e.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, #e2e8f0 0%, #f8fafc 60%, #e2e8f0 100%)",padding:s.spacing.lg},children:[b&&e.jsx("div",{style:{position:"fixed",top:16,left:0,right:0,display:"flex",justifyContent:"center",zIndex:1e3},children:e.jsx("div",{style:{background:"rgba(16,185,129,0.15)",color:"#A7F3D0",border:"1px solid rgba(16,185,129,0.3)",padding:"8px 14px",borderRadius:9999},children:b})}),e.jsxs("div",{style:{maxWidth:980,margin:"0 auto"},children:[e.jsx("h1",{style:{color:"white"},children:"Settings"}),e.jsxs(i,{style:{padding:s.spacing.xl,marginBottom:s.spacing.lg,background:"#ffffff",border:"1px solid #e5e7eb",color:"#0f172a"},children:[e.jsx("h2",{children:"Account"}),e.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"1fr 1fr"},children:[e.jsxs("label",{children:["Display name",e.jsx("input",{value:c.displayName,onChange:t=>u(n=>({...n,displayName:t.target.value}))})]}),e.jsxs("label",{children:["Language",e.jsxs("select",{value:c.language,onChange:t=>u(n=>({...n,language:t.target.value})),children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"ne",children:"नेपाली (Nepali)"})]})]})]})]}),e.jsxs(i,{style:{padding:s.spacing.xl,marginBottom:s.spacing.lg,background:"#ffffff",border:"1px solid #e5e7eb",color:"#0f172a"},children:[e.jsx("h2",{children:"Privacy"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:r.showLocation,onChange:t=>f(n=>({...n,showLocation:t.target.checked}))})," Show location"]}),e.jsx("br",{}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:r.showPhone,onChange:t=>f(n=>({...n,showPhone:t.target.checked}))})," Show phone"]})]}),e.jsxs(i,{style:{padding:s.spacing.xl,marginBottom:s.spacing.lg,background:"#ffffff",border:"1px solid #e5e7eb",color:"#0f172a"},children:[e.jsx("h2",{children:"Security"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:d.loginAlerts,onChange:t=>j(n=>({...n,loginAlerts:t.target.checked}))})," Login alerts"]}),e.jsx("br",{}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:d.twoFA,onChange:t=>j(n=>({...n,twoFA:t.target.checked}))})," Two‑factor authentication"]}),e.jsx("div",{style:{marginTop:12},children:e.jsx(o,{variant:"outline",onClick:()=>g(!0),children:"Delete account…"})})]}),e.jsxs(i,{style:{padding:s.spacing.xl,marginBottom:s.spacing.lg,background:"#ffffff",border:"1px solid #e5e7eb",color:"#0f172a"},children:[e.jsx("h2",{children:"Payments"}),e.jsxs("label",{children:["Default method",e.jsxs("select",{value:p.defaultMethod,onChange:t=>v(n=>({...n,defaultMethod:t.target.value})),children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"esewa",children:"eSewa"}),e.jsx("option",{value:"khalti",children:"Khalti"})]})]})]}),e.jsxs(i,{style:{padding:s.spacing.xl,marginBottom:s.spacing.lg,background:"#ffffff",border:"1px solid #e5e7eb",color:"#0f172a"},children:[e.jsx("h2",{children:"Integrations"}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx(o,{variant:"outline",onClick:()=>m("google"),disabled:a.google,children:a.google?"Google linked":"Link Google"}),e.jsx(o,{variant:"outline",onClick:()=>m("apple"),disabled:a.apple,children:a.apple?"Apple linked":"Link Apple"})]})]}),e.jsxs(i,{style:{padding:s.spacing.xl,marginBottom:s.spacing.lg},children:[e.jsx("h2",{children:"Audit trail"}),y.length===0?e.jsx("div",{style:{color:"#64748b"},children:"No recent changes."}):e.jsx("ul",{children:y.map((t,n)=>e.jsxs("li",{children:[t.when,": ",t.what]},n))})]}),e.jsx("div",{style:{display:"flex",gap:8},children:e.jsx(o,{onClick:A,children:"Save settings"})})]}),C&&e.jsx(D,{open:!0,onClose:()=>g(!1),children:e.jsxs("div",{style:{padding:16},children:[e.jsx("h3",{style:{marginTop:0},children:"Delete account?"}),e.jsx("p",{children:"This is permanent and cannot be undone."}),e.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[e.jsx(o,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(o,{onClick:()=>{g(!1),alert("Account deletion flow placeholder")},children:"Delete"})]})]})})]})}export{P as default};
