import{j as e,q as i,x as d,C as A,i as c,k as R}from"./index-5gA1ZPbL.js";/* empty css                   */function z({height:n=220,children:o,style:a,className:u}){return e.jsxs("div",{style:{minHeight:n,background:"#f8fafc",position:"relative",...a},className:u,children:[e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(180deg, #1B263B 0%, #003893 60%, #E63946 140%)"}}),e.jsx("div",{style:{position:"absolute",left:"50%",top:"60%",width:800,height:800,transform:"translate(-50%,-50%)",background:"radial-gradient(closest-side, rgba(230,57,70,0.40), transparent 70%)"}}),e.jsx("div",{style:{position:"absolute",inset:0,background:"repeating-linear-gradient(110deg, rgba(255,255,255,0.05) 0, rgba(255,255,255,0.05) 2px, transparent 2px, transparent 8px)"}}),e.jsx("div",{style:{position:"absolute",inset:0,background:"linear-gradient(180deg, rgba(0,0,0,0.35) 0%, rgba(0,0,0,0.00) 70%)"}}),o&&e.jsx("div",{style:{position:"relative",zIndex:1},children:o})]})}const h={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},v=["Push","Email","SMS"],x=[{key:"invites",label:"Game invites"},{key:"reminders",label:"Game reminders"},{key:"teamchat",label:"Team chat messages"},{key:"organizer",label:"Organizer updates"},{key:"ratings",label:"Ratings & reviews"}];function I(){const[n,o]=i.useState(()=>{const t={};return x.forEach(s=>t[s.key]={Push:!0,Email:!0,SMS:!1}),t}),[a,u]=i.useState({start:"22:00",end:"07:00"}),[f,k]=i.useState("Asia/Kathmandu"),[y,r]=i.useState(null),[b,g]=i.useState(null),[j,m]=i.useState(!1),[T,p]=i.useState(!1),S=(t,s)=>{o(l=>({...l,[t]:{...l[t],[s]:!l[t][s]}}))},C=async()=>{try{const t=localStorage.getItem("ps_token"),s=(h==null?void 0:h.VITE_API_BASE)||"http://localhost:8080",l=await fetch(`${s}/notifications/preferences`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""},body:JSON.stringify({prefs:n,quietHours:a,timezone:f})});if(!l.ok)throw new Error(String(l.status));r("Notification preferences saved"),setTimeout(()=>r(null),2e3)}catch{try{localStorage.setItem("ps_notify_prefs",JSON.stringify({prefs:n,quietHours:a,tz:f})),r("Saved locally"),setTimeout(()=>r(null),2e3)}catch(t){g((t==null?void 0:t.message)||"Failed to save"),setTimeout(()=>g(null),2500)}}},E=async()=>{m(!0);try{await new Promise(t=>setTimeout(t,800)),r("Test notification sent"),setTimeout(()=>r(null),2e3)}catch(t){g((t==null?void 0:t.message)||"Failed to send test"),setTimeout(()=>g(null),2500)}finally{m(!1)}};return e.jsxs("div",{style:{minHeight:"100vh",background:"#f8fafc"},children:[e.jsx(z,{height:220}),e.jsxs("div",{style:{padding:d.spacing.lg},children:[y&&e.jsx("div",{style:{position:"fixed",top:16,left:0,right:0,display:"flex",justifyContent:"center",zIndex:1e3},children:e.jsx("div",{style:{background:"rgba(16,185,129,0.15)",color:"#A7F3D0",border:"1px solid rgba(16,185,129,0.3)",padding:"8px 14px",borderRadius:9999},children:y})}),b&&e.jsx("div",{style:{position:"fixed",top:16,left:0,right:0,display:"flex",justifyContent:"center",zIndex:1e3},children:e.jsx("div",{style:{background:"rgba(239,68,68,0.15)",color:"#FCA5A5",border:"1px solid rgba(239,68,68,0.3)",padding:"8px 14px",borderRadius:9999},children:b})}),e.jsx("div",{style:{maxWidth:960,margin:"-140px auto 0 auto"},children:e.jsxs(A,{style:{padding:d.spacing.xl,marginBottom:d.spacing.lg,background:"#ffffff",border:"1px solid #e5e7eb",color:"#0f172a"},children:[e.jsx("h1",{style:{marginTop:0,color:"#0f172a"},children:"Notifications"}),e.jsx("p",{className:"text-muted",children:"Choose how you want to be notified for each event type. Configure quiet hours and timezone for digests."}),e.jsx("div",{style:{overflowX:"auto",border:"1px solid #e5e7eb",borderRadius:12,background:"#ffffff"},children:e.jsxs("table",{role:"grid",style:{width:"100%",borderCollapse:"separate",borderSpacing:0},children:[e.jsx("thead",{style:{background:"#f8fafc",color:"#0f172a"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{textAlign:"left",padding:12},children:"Event"}),v.map(t=>e.jsx("th",{style:{textAlign:"left",padding:12},children:t},t))]})}),e.jsx("tbody",{children:x.map(t=>e.jsxs("tr",{style:{background:"#ffffff",color:"#0f172a"},children:[e.jsx("td",{style:{padding:12,borderTop:"1px solid #e5e7eb"},children:t.label}),v.map(s=>e.jsx("td",{style:{padding:12,borderTop:"1px solid #e5e7eb"},children:e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:8,color:"#0f172a"},children:[e.jsx("input",{type:"checkbox",checked:n[t.key][s],onChange:()=>S(t.key,s)}),e.jsx("span",{style:{color:"#475569",fontSize:13},children:n[t.key][s]?"On":"Off"})]})},s))]},t.key))})]})}),e.jsxs("div",{style:{display:"grid",gap:12,gridTemplateColumns:"1fr 1fr",marginTop:d.spacing.lg},children:[e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[e.jsx("strong",{children:"Quiet hours"}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[e.jsxs("label",{children:["Start ",e.jsx("input",{type:"time",value:a.start,onChange:t=>u(s=>({...s,start:t.target.value}))})]}),e.jsxs("label",{children:["End ",e.jsx("input",{type:"time",value:a.end,onChange:t=>u(s=>({...s,end:t.target.value}))})]})]}),e.jsx("div",{style:{color:"#64748b",fontSize:12,marginTop:6},children:"Notifications are muted during quiet hours. Timezone aware."})]}),e.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[e.jsx("strong",{children:"Timezone"}),e.jsx("div",{style:{marginTop:8},children:e.jsxs("select",{value:f,onChange:t=>k(t.target.value),children:[e.jsx("option",{value:"Asia/Kathmandu",children:"Asia/Kathmandu (NPT)"}),e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),e.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"}),e.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata (IST)"})]})}),e.jsx("div",{style:{color:"#64748b",fontSize:12,marginTop:6},children:"Used for digest delivery and reminders."})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:d.spacing.lg},children:[e.jsx(c,{onClick:C,children:"Save"}),e.jsx(c,{variant:"outline",onClick:()=>p(!0),children:"Reset to defaults"}),e.jsx(c,{variant:"outline",onClick:E,disabled:j,children:j?"Sendingâ€¦":"Send test"})]})]})}),T&&e.jsx(R,{open:!0,onClose:()=>p(!1),children:e.jsxs("div",{style:{padding:16},children:[e.jsx("h3",{style:{marginTop:0},children:"Reset preferences?"}),e.jsx("p",{children:"This will restore defaults for all notification channels."}),e.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[e.jsx(c,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(c,{onClick:()=>{const t={};x.forEach(s=>t[s.key]={Push:!0,Email:!0,SMS:!1}),o(t),p(!1)},children:"Reset"})]})]})})]})]})}export{I as default};
